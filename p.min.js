(function(e){if(typeof module!=="undefined"&&module&&module.exports){module.exports=e()}else if(typeof define==="function"&&define.amd){define(e)}else{P=e()}})(function(){"use strict";var e=i,n=a(),t,r=null;function i(e){if(!e.stack){try{throw e}catch(n){}}return e}if((new Error).stack){e=function(e){return e}}function o(){var n=e(new Error).stack;if(!n){return null}var t=[f(n,1)];if(r){t=t.concat(r);if(t.length===128){t.pop()}}return t}function u(e){var n=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e)||/at ([^ ]+):(\d+):(?:\d+)$/.exec(e)||/@(.+):(\d+):(?:\d+)$/.exec(e);return n?{fileName:n[1],lineNumber:Number(n[2])}:null}function a(){var n=e(new Error).stack;if(!n){return 0}var r=n.split("\n");var i=r[0].indexOf("@")>0?r[1]:r[2];var o=u(i);if(!o){return 0}t=o.fileName;return o.lineNumber}function f(e,n){var t=e.split("\n");var r=[];for(var i=n|0,o=t.length;i<o;++i){var u=t[i];if(u&&!l(u)&&!c(u)){r.push(u)}}return r.join("\n")}function l(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function c(e){var r=u(e);return!!r&&r.fileName===t&&r.lineNumber>=n&&r.lineNumber<=hn}var s="\nFrom previous event:\n";function v(n){if(n instanceof Error){var t=n.stack;if(!t){t=e(n).stack}else if(~t.indexOf(s)){return}if(t){n.stack=[f(t,0)].concat(r||[]).join(s)}}}var p=N(typeof process)&&process!=null&&{}.toString.call(process)==="[object process]",d=typeof setImmediate==="function",h=N(typeof MutationObserver)&&MutationObserver||N(typeof WebKitMutationObserver)&&WebKitMutationObserver,_=new E,m=_,y=false,w=0,b=p?M:h?$(A):K(A),g=[],x=K(O),k,T,j=N.call,S=N.apply;m.next=_;function E(){this.a=null;this.b=null;this.next=null}function N(e){return e==="object"||e==="function"}function O(){if(g.length){throw g.shift()}}function A(){while(_!==m){var e=_=_.next;if(w>=1024){m.next=m.next.next}else{++w}var n=e.a;var t=e.b;e.a=null;e.b=null;nn(n,t)}y=false;r=null}function I(e,n){var t=m.next;if(t===_){m.next=t=new E;t.next=_}else{--w}m=t;t.a=e;t.b=n;if(!y){y=true;b()}}function M(){var e=process.domain;if(e){if(!T)T=(1,require)("domain");T.active=process.domain=null}if(y&&d){setImmediate(A)}else{process.nextTick(A)}if(e){T.active=process.domain=e}}function $(e){var n=1;var t=document.createTextNode("");var r=new h(e);r.observe(t,{characterData:true});return function(){n=-n;t.data=n}}function K(e){return function(){var n=setTimeout(r,0);var t=setInterval(r,50);function r(){clearTimeout(n);clearInterval(t);e()}}}if(p){k=function(e){r=null;b();throw e}}else{k=function(e){g.push(e);x()}}var W=0;var q=1;var D=2;var F=-1;var P=-2;var Y=-3;function z(e){if(C.onerror){(1,C.onerror)(e)}else{throw e}}function B(e){if(e._state===D){if(e._domain){e._domain.enter()}k(e._value)}}function C(e){return e instanceof fn?e:Q(new fn,e)}C.longStackSupport=false;function G(e){if(e._pending){Z(e,e._op,e._pending);e._pending=null}}function H(e,n){if(e._state){return}e._state=q;e._value=n;G(e)}function J(e,n){if(e._state){return}if(r){v(n)}e._state=D;e._value=n;if(p){e._domain=process.domain}G(e)}function L(e,n){if(n._state){return}n._state=e._state;n._value=e._value;n._domain=e._domain;G(n)}function Q(e,n){if(e._state){return e}if(n instanceof fn){R(e,n)}else{var t=typeof n;if(t==="object"&&n!==null||t==="function"){U(e,n)}else{H(e,n)}}return e}function R(e,n){if(n===e){J(e,new TypeError("You can't resolve a promise with itself"))}else if(n._state){L(n,e)}else{en(n,P,e)}}function U(e,n){var t=V(e,n);if(typeof t==="function"){X(on(e),t,n)}else{H(e,n)}}function V(e,n){try{return n.then}catch(t){J(e,t);return null}}function X(e,n,t){try{j.call(n,t,e.resolve,e.reject)}catch(r){e.reject(r)}}function Z(e,n,t){if(n===F){t(e)}else if(n===P){I(e,t)}else if(n===Y){for(var r=0,i=t.length;r<i;r+=2){Z(e,t[r],t[r+1])}}else{t(e,n)}}function en(e,n,t){if(e._state){Z(e,n,t)}else if(!e._pending){e._pending=t;e._op=n}else if(e._op===Y){e._pending.push(n,t)}else{e._pending=[e._op,e._pending,n,t];e._op=Y}}function nn(e,n){var t=e._domain||n._domain;r=n._trace;var i=e._state===q?n._cb:n._eb;n._cb=null;n._eb=null;n._domain=null;n._trace=null;if(i===null){L(e,n)}else if(t){if(!t._disposed){t.enter();tn(n,i,e._value);t.exit()}}else{tn(n,i,e._value)}}function tn(e,n,t){var r;try{r=n(t)}catch(i){J(e,i);return}Q(e,r)}function rn(e,n){var t=false;var i=C.longStackSupport?o():null;return function(o,u){if(!t){t=true;if(i){if(r){i=null}else{r=i}}if(o){J(e,n?o:u)}else{Q(e,u)}if(i){r=null}}}}function on(e){var n=rn(e,false);return{promise:e,resolve:function(e){n(false,e)},reject:function(e){n(true,e)}}}C.defer=un;function un(){return on(new fn)}C.reject=an;function an(e){var n=new fn;J(n,e);return n}function fn(){this._state=0;this._value=void 0;this._domain=null;this._cb=null;this._eb=null;this._op=0;this._pending=null;this._trace=null}fn.prototype.then=function(e,n){var t=new fn;t._cb=typeof e==="function"?e:null;t._eb=typeof n==="function"?n:null;if(C.longStackSupport){t._trace=o()}if(p){t._domain=process.domain}if(this._state){I(this,t)}else{en(this,P,t)}return t};fn.prototype.done=function(e,n){var t=this;if(e||n){t=t.then(e,n)}t=t.then(null,z);en(t,F,B)};fn.prototype.fail=function(e){return this.then(null,e)};fn.prototype.spread=function(e,n){return this.then(cn).then(function(n){return S.call(e,void 0,n)},n)};fn.prototype.timeout=function(e,n){var t=new fn;if(this._state!==W){L(this,t)}else{var i=C.longStackSupport?o():null;var u=setTimeout(function(){r=i;J(t,new Error(n||"Timed out after "+e+" ms"))},e);en(this,F,function(e){clearTimeout(u);L(e,t)})}return t};fn.prototype.delay=function(e){var n=new fn;en(this,F,function(t){if(t._state===q){setTimeout(function(){L(t,n)},e)}else{L(t,n)}});return n};fn.prototype.all=function(){return this.then(cn)};fn.prototype.allSettled=function(){return this.then(ln)};fn.prototype.inspect=function(){switch(this._state){case W:return{state:"pending"};case q:return{state:"fulfilled",value:this._value};case D:return{state:"rejected",reason:this._value};default:throw new TypeError("invalid state")}};fn.prototype.nodeify=function(e){if(e){this.done(function(n){e(null,n)},e);return void 0}else{return this}};C.allSettled=ln;function ln(e){var n=new fn;var t=e.length;if(typeof t!=="number"){J(n,new TypeError("input not array-like"));return n}var r=new Array(t);var i=t;function o(e,t){r[t]=e.inspect();if(--i===0){H(n,r)}}for(var u=0;u<t;++u){en(C(e[u]),u,o)}if(i===0){H(n,r)}return n}C.all=cn;function cn(e){var n=new fn;var t=e.length;if(typeof t!=="number"){J(n,new TypeError("input not array-like"));return n}var r=new Array(t);var i=t;function o(e,t){if(r!==null){if(e._state===D){r=null;L(e,n)}else{r[t]=e._value;if(--i===0){H(n,r)}}}}for(var u=0;u<t;++u){en(C(e[u]),u,o)}if(i===0){H(n,r)}return n}C.spread=sn;function sn(e,n,t){return cn(e).then(function(e){return S.call(n,void 0,e)},t)}C.promised=vn;function vn(e){function n(n){return j.apply(e,n)}return function(){var e=arguments.length;var t=new Array(e+1);t[0]=this;for(var r=0;r<e;++r){t[r+1]=arguments[r]}return cn(t).then(n)}}C.denodeify=pn;function pn(e){return function(){var n=new fn;var t=arguments.length;var r=new Array(t+1);r[t]=rn(n,true);while(t--){r[t]=arguments[t]}S.call(e,this,r);return n}}C.onerror=null;C.nextTick=function _n(e){var n=new fn;H(n,e);n=n.then(dn);en(n,F,B)};function dn(e){e.call()}var hn=a();return C});