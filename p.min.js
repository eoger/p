(function(n){if(typeof module!=="undefined"&&module&&module.exports){module.exports=n()}else if(typeof define==="function"&&define.amd){define(n)}else{P=n()}})(function(){"use strict";var n=o(),e,t=null;function r(){var n=(new Error).stack;if(!n){return null}var e=[u(n,1)];if(t){e=e.concat(t);if(e.length===128){e.pop()}}return e}function i(n){var e=/at .+ \(([\s\S]+):(\d+):(?:\d+)\)$/.exec(n)||/at ([^ ]+):(\d+):(?:\d+)$/.exec(n)||/@([\s\S]+):(\d+):(?:\d+)$/.exec(n);return e?{fileName:e[1],lineNumber:Number(e[2])}:null}function o(){var n=(new Error).stack;if(!n){return 0}var t=n.split("\n");var r=t[0].indexOf("@")>0?t[1]:t[2];var o=i(r);if(!o){return 0}e=o.fileName;return o.lineNumber}function u(n,e){var t=n.split("\n");var r=[];for(var i=e|0,o=t.length;i<o;++i){var u=t[i];if(u&&!a(u)&&!l(u)){r.push(u)}}return r.join("\n")}function a(n){return n.indexOf("(module.js:")!==-1||n.indexOf("(node.js:")!==-1}function l(t){var r=i(t);return!!r&&r.fileName===e&&r.lineNumber>=n&&r.lineNumber<=pe}var f="\nFrom previous event:\n";function c(n){if(n instanceof Error&&n.stack&&n.stack.indexOf(f)===-1){n.stack=[u(n.stack,0)].concat(t||[]).join(f)}}var s=T(typeof process)&&process!=null&&{}.toString.call(process)==="[object process]",p=typeof setImmediate==="function",v=T(typeof MutationObserver)&&MutationObserver||T(typeof WebKitMutationObserver)&&WebKitMutationObserver,d=new S,_=d,h=false,m=0,y=s?$:v?K(O):W(O),b=[],g=W(N),w,k,x=T.call,j=T.apply;_.next=d;function S(){this.task=null;this.a=null;this.b=null;this.domain=null;this.trace=null;this.next=null}function T(n){return n==="object"||n==="function"}function N(){if(b.length){throw b.shift()}}function O(){while(d!==_){var n=d=d.next;if(m>=1024){_.next=_.next.next}else{++m}t=n.trace;if(n.domain){I(n.domain,n.task,n.a,n.b);n.domain=null}else{(1,n.task)(n.a,n.b)}n.task=null;n.a=null;n.b=null;n.trace=null}h=false;t=null}function E(){d.task=null;d.a=null;d.b=null;d.domain=null;d.trace=null;y()}function I(n,e,t,r){if(n._disposed){return}n.enter();e(t,r);n.exit()}function M(n,e,t){A(n,e,t,s?process.domain:null,L.longStackSupport?r():null)}function A(n,e,t,r,i){var o=_.next;if(o===d){o=new S;_.next=o;o.next=d}else{--m}_=o;o.task=n;o.a=e;o.b=t;o.domain=r;o.trace=i;if(!h){h=true;y()}}function $(){var n=process.domain;if(n){if(!k)k=(1,require)("domain");k.active=process.domain=null}if(h&&p){setImmediate(O)}else{process.nextTick(O)}if(n){k.active=process.domain=n}}function K(n){var e=1;var t=document.createTextNode("");var r=new v(n);r.observe(t,{characterData:true});return function(){e=-e;t.data=e}}function W(n){return function(){var e=setTimeout(r,0);var t=setInterval(r,50);function r(){clearTimeout(e);clearInterval(t);n()}}}if(s){w=function(n){E();throw n}}else{w=function(n){b.push(n);g()}}function q(n,e){try{n.call()}catch(t){e(t)}}function D(n){M(q,n,w)}var F=0;var P=1;var Y=2;var z=-1;var B=-2;var C=-3;var G=-4;function H(n){if(n._state===Y){A(J,n._value,w,n._domain,null)}}function J(n,e){if(L.onerror){try{(1,L.onerror)(n)}catch(t){e(t)}}else{e(n)}}function L(n){return n instanceof ae?n:V(new ae,n)}L.longStackSupport=false;function Q(n,e){if(n._state){return}n._state=P;n._value=e;if(n._pending){ne(n,n._op,n._pending);n._pending=null}}function R(n,e){if(n._state){return}if(t){c(e)}n._state=Y;n._value=e;if(s){n._domain=process.domain}if(n._pending){ne(n,n._op,n._pending);n._pending=null}}function U(n,e){if(e._state){return}e._state=n._state;e._value=n._value;e._domain=n._domain;if(e._pending){ne(e,e._op,e._pending);e._pending=null}}function V(n,e){if(n._state){return n}if(e instanceof ae){if(e===n){R(n,new TypeError("You can't resolve a promise with itself"))}else if(e._state){U(e,n)}else{ee(e,C,n)}}else if(e!==Object(e)){Q(n,e)}else{var t=X(n,e);if(typeof t==="function"){Z(ie(n),t,e)}else{Q(n,e)}}return n}function X(n,e){try{return e.then}catch(t){R(n,t);return null}}function Z(n,e,t){try{x.call(e,t,n.resolve,n.reject)}catch(r){n.reject(r)}}function ne(n,e,t){switch(e){case z:t(n);break;case B:A(te,n,t,n._domain||t._domain,t._trace);break;case C:A(U,n,t,null,null);break;case G:for(var r=0,i=t.length;r<i;r+=2){ne(n,t[r],t[r+1])}break;default:t(n,e)}}function ee(n,e,t){if(n._state){ne(n,e,t)}else if(!n._pending){n._pending=t;n._op=e}else if(n._op===G){n._pending.push(e,t)}else{n._pending=[n._op,n._pending,e,t];n._op=G}}function te(n,e){var t=n._state===P?e._cb:e._eb;e._cb=null;e._eb=null;e._domain=null;e._trace=null;if(t===null){U(n,e)}else{re(e,t,n._value)}}function re(n,e,t){var r;try{r=e(t)}catch(i){R(n,i);return}V(n,r)}function ie(n){var e=false;return{promise:n,resolve:function(t){if(!e){e=true;V(n,t)}},reject:function(t){if(!e){e=true;R(n,t)}}}}L.defer=oe;function oe(){return ie(new ae)}L.reject=ue;function ue(n){var e=new ae;R(e,n);return e}function ae(){this._state=0;this._value=void 0;this._domain=null;this._cb=null;this._eb=null;this._op=0;this._pending=null;this._trace=null}ae.prototype.then=function(n,e){var t=new ae;t._cb=typeof n==="function"?n:null;t._eb=typeof e==="function"?e:null;if(L.longStackSupport){t._trace=r()}if(s){t._domain=process.domain}ee(this,B,t);return t};ae.prototype.done=function(n,e){var t=this;if(n||e){t=t.then(n,e)}ee(t,z,H)};ae.prototype.fail=function(n){return this.then(null,n)};ae.prototype.spread=function(n,e){return this.then(fe).then(function(e){return j.call(n,void 0,e)},e)};ae.prototype.timeout=function(n,e){var i=new ae;if(this._state!==F){U(this,i)}else{var o=L.longStackSupport?r():null;var u=setTimeout(function(){t=o;R(i,new Error(e||"Timed out after "+n+" ms"))},n);ee(this,z,function(n){clearTimeout(u);U(n,i)})}return i};ae.prototype.delay=function(n){var e=oe();this.then(function(r){var i=t;setTimeout(function(){t=i;e.resolve(r)},n)},e.reject);return e.promise};ae.prototype.all=function(){return this.then(fe)};ae.prototype.allSettled=function(){return this.then(le)};ae.prototype.inspect=function(){switch(this._state){case F:return{state:"pending"};case P:return{state:"fulfilled",value:this._value};case Y:return{state:"rejected",reason:this._value};default:throw new TypeError("invalid state")}};ae.prototype.nodeify=function(n){if(n){this.done(function(e){n(null,e)},n);return void 0}else{return this}};L.allSettled=le;function le(n){var e=new ae;var t=n.length;if(typeof t!=="number"){R(e,new TypeError("input not array-like"));return e}var r=0;var i=new Array(t);function o(n,t){i[t]=n.inspect();if(--r===0){Q(e,i)}}for(var u=0;u<t;++u){if(u in n){var a=L(n[u]);if(a._state){i[u]=a.inspect()}else{++r;ee(a,u,o)}}}if(r===0){Q(e,i)}return e}L.all=fe;function fe(n){var e=new ae;var t=n.length;if(typeof t!=="number"){R(e,new TypeError("input not array-like"));return e}var r=0;var i=new Array(t);function o(n,t){if(n._state===Y){U(n,e);return}i[t]=n._value;if(--r===0){Q(e,i)}}for(var u=0;u<t;++u){if(u in n){var a=L(n[u]);if(a._state===P){i[u]=a._value}else if(a._state===Y){U(a,e);break}else{++r;ee(a,u,o)}}}if(r===0){Q(e,i)}return e}L.spread=ce;function ce(n,e,t){return fe(n).then(function(n){return j.call(e,void 0,n)},t)}L.promised=se;function se(n){function e(e){return x.apply(n,e)}return function(){var n=arguments.length;var t=new Array(n+1);t[0]=this;for(var r=0;r<n;++r){t[r+1]=arguments[r]}return fe(t).then(e)}}L.onerror=null;L.nextTick=D;var pe=o();return L});