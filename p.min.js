(function(e){if(typeof module!=="undefined"&&module&&module.exports){module.exports=e()}else if(typeof define==="function"&&define.amd){define(e)}else{P=e()}})(function(){"use strict";var e=o(),n,t=null;function r(){var e=(new Error).stack;if(!e){return null}var n=[u(e,1)];if(t){n=n.concat(t);if(n.length===128){n.pop()}}return n}function i(e){var n=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e)||/at ([^ ]+):(\d+):(?:\d+)$/.exec(e)||/@(.+):(\d+):(?:\d+)$/.exec(e);return n?{fileName:n[1],lineNumber:Number(n[2])}:null}function o(){var e=(new Error).stack;if(!e){return 0}var t=e.split("\n");var r=t[0].indexOf("@")>0?t[1]:t[2];var o=i(r);if(!o){return 0}n=o.fileName;return o.lineNumber}function u(e,n){var t=e.split("\n");var r=[];for(var i=n|0,o=t.length;i<o;++i){var u=t[i];if(u&&!a(u)&&!f(u)){r.push(u)}}return r.join("\n")}function a(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function f(t){var r=i(t);return!!r&&r.fileName===n&&r.lineNumber>=e&&r.lineNumber<=sn}var l="\nFrom previous event:\n";function s(e){if(e instanceof Error&&e.stack&&e.stack.indexOf(l)===-1){e.stack=[u(e.stack,0)].concat(t||[]).join(l)}}var c=N(typeof process)&&process!=null&&{}.toString.call(process)==="[object process]",p=typeof setImmediate==="function",v=N(typeof MutationObserver)&&MutationObserver||N(typeof WebKitMutationObserver)&&WebKitMutationObserver,d=new T,h=d,_=false,m=0,y=c?I:v?M(E):A(E),b=[],w=A(S),g,x,j=N.call,k=N.apply;h.next=d;function T(){this.a=null;this.b=null;this.next=null}function N(e){return e==="object"||e==="function"}function S(){if(b.length){throw b.shift()}}function E(){while(d!==h){var e=d=d.next;if(m>=1024){h.next=h.next.next}else{++m}var n=e.a;var r=e.b;e.a=null;e.b=null;Z(n,r)}_=false;t=null}function O(e,n){var t=h.next;if(t===d){h.next=t=new T;t.next=d}else{--m}h=t;t.a=e;t.b=n;if(!_){_=true;y()}}function I(){var e=process.domain;if(e){if(!x)x=(1,require)("domain");x.active=process.domain=null}if(_&&p){setImmediate(E)}else{process.nextTick(E)}if(e){x.active=process.domain=e}}function M(e){var n=1;var t=document.createTextNode("");var r=new v(e);r.observe(t,{characterData:true});return function(){n=-n;t.data=n}}function A(e){return function(){var n=setTimeout(r,0);var t=setInterval(r,50);function r(){clearTimeout(n);clearInterval(t);e()}}}if(c){g=function(e){y();throw e}}else{g=function(e){b.push(e);w()}}function $(e){z().done(function(){e.call()})}var K=0;var W=1;var q=2;var D=-1;var F=-2;var P=-3;function Y(e){if(z.onerror){(1,z.onerror)(e)}else{throw e}}function z(e){return e instanceof on?e:J(new on,e)}z.longStackSupport=false;function B(e){if(e._pending){V(e,e._op,e._pending);e._pending=null}}function C(e,n){if(e._state){return}e._state=W;e._value=n;B(e)}function G(e,n){if(e._state){return}if(t){s(n)}e._state=q;e._value=n;if(c){e._domain=process.domain}B(e)}function H(e,n){if(n._state){return}n._state=e._state;n._value=e._value;n._domain=e._domain;B(n)}function J(e,n){if(e._state){return e}if(n instanceof on){L(e,n)}else{var t=typeof n;if(t==="object"&&n!==null||t==="function"){Q(e,n)}else{C(e,n)}}return e}function L(e,n){if(n===e){G(e,new TypeError("You can't resolve a promise with itself"))}else if(n._state){H(n,e)}else{X(n,F,e)}}function Q(e,n){var t=R(e,n);if(typeof t==="function"){U(nn(e),t,n)}else{C(e,n)}}function R(e,n){try{return n.then}catch(t){G(e,t);return null}}function U(e,n,t){try{j.call(n,t,e.resolve,e.reject)}catch(r){e.reject(r)}}function V(e,n,t){if(n===D){t(e)}else if(n===F){O(e,t)}else if(n===P){for(var r=0,i=t.length;r<i;r+=2){V(e,t[r],t[r+1])}}else{t(e,n)}}function X(e,n,t){if(e._state){V(e,n,t)}else if(!e._pending){e._pending=t;e._op=n}else if(e._op===P){e._pending.push(n,t)}else{e._pending=[e._op,e._pending,n,t];e._op=P}}function Z(e,n){var r=e._domain||n._domain;t=n._trace;var i=e._state===W?n._cb:n._eb;n._cb=null;n._eb=null;n._domain=null;n._trace=null;if(i===null){H(e,n)}else if(r){if(!r._disposed){r.enter();en(n,i,e._value);r.exit()}}else{en(n,i,e._value)}}function en(e,n,t){var r;try{r=n(t)}catch(i){if(n===Y){g(i)}else{G(e,i)}return}J(e,r)}function nn(e){var n=false;return{promise:e,resolve:function(t){if(!n){n=true;J(e,t)}},reject:function(t){if(!n){n=true;G(e,t)}}}}z.defer=tn;function tn(){return nn(new on)}z.reject=rn;function rn(e){var n=new on;G(n,e);return n}function on(){this._state=0;this._value=void 0;this._domain=null;this._cb=null;this._eb=null;this._op=0;this._pending=null;this._trace=null}on.prototype.then=function(e,n){var t=new on;t._cb=typeof e==="function"?e:null;t._eb=typeof n==="function"?n:null;if(z.longStackSupport){t._trace=r()}if(c){t._domain=process.domain}if(this._state){O(this,t)}else{X(this,F,t)}return t};on.prototype.done=function(e,n){var t=this;if(e||n){t=t.then(e,n)}t.then(null,Y)};on.prototype.fail=function(e){return this.then(null,e)};on.prototype.spread=function(e,n){return this.then(an).then(function(n){return k.call(e,void 0,n)},n)};on.prototype.timeout=function(e,n){var i=new on;if(this._state!==K){H(this,i)}else{var o=z.longStackSupport?r():null;var u=setTimeout(function(){t=o;G(i,new Error(n||"Timed out after "+e+" ms"))},e);X(this,D,function(e){clearTimeout(u);H(e,i)})}return i};on.prototype.delay=function(e){var n=tn();this.then(function(r){var i=t;setTimeout(function(){t=i;n.resolve(r)},e)},n.reject);return n.promise};on.prototype.all=function(){return this.then(an)};on.prototype.allSettled=function(){return this.then(un)};on.prototype.inspect=function(){switch(this._state){case K:return{state:"pending"};case W:return{state:"fulfilled",value:this._value};case q:return{state:"rejected",reason:this._value};default:throw new TypeError("invalid state")}};on.prototype.nodeify=function(e){if(e){this.done(function(n){e(null,n)},e);return void 0}else{return this}};z.allSettled=un;function un(e){var n=new on;var t=e.length;if(typeof t!=="number"){G(n,new TypeError("input not array-like"));return n}var r=new Array(t);var i=t;function o(e,t){r[t]=e.inspect();if(--i===0){C(n,r)}}for(var u=0;u<t;++u){X(z(e[u]),u,o)}if(i===0){C(n,r)}return n}z.all=an;function an(e){var n=new on;var t=e.length;if(typeof t!=="number"){G(n,new TypeError("input not array-like"));return n}var r=new Array(t);var i=t;var o=false;function u(e,t){if(r!==null){if(e._state===q){r=null;H(e,n)}else{r[t]=e._value;if(--i===0){C(n,r)}}}}for(var a=0;a<t;++a){X(z(e[a]),a,u)}if(i===0){C(n,r)}return n}z.spread=fn;function fn(e,n,t){return an(e).then(function(e){return k.call(n,void 0,e)},t)}z.promised=ln;function ln(e){function n(n){return j.apply(e,n)}return function(){var e=arguments.length;var t=new Array(e+1);t[0]=this;for(var r=0;r<e;++r){t[r+1]=arguments[r]}return an(t).then(n)}}z.onerror=null;z.nextTick=$;var sn=o();return z});