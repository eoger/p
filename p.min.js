(function(e){if(typeof module!=="undefined"&&module&&module.exports){module.exports=e()}else if(typeof define==="function"&&define.amd){define(e)}else{P=e()}})(function(){"use strict";var e=a(),n,t=null;function r(){var e=(new Error).stack;if(!e){return null}var n=[o(e,1)];if(t){n=n.concat(t);if(n.length===128){n.pop()}}return n}function i(e){var n=/at .+ \(([\s\S]+):(\d+):(?:\d+)\)$/.exec(e)||/at ([^ ]+):(\d+):(?:\d+)$/.exec(e)||/@([\s\S]+):(\d+):(?:\d+)$/.exec(e);return n?{fileName:n[1],lineNumber:Number(n[2])}:null}function a(){var e=(new Error).stack;if(!e){return 0}var t=e.split("\n");var r=t[0].indexOf("@")>0?t[1]:t[2];var a=i(r);if(!a){return 0}n=a.fileName;return a.lineNumber}function o(e,n){var t=e.split("\n");var r=[];for(var i=n|0,a=t.length;i<a;++i){var o=t[i];if(o&&!u(o)&&!l(o)){r.push(o)}}return r.join("\n")}function u(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function l(t){var r=i(t);return!!r&&r.fileName===n&&r.lineNumber>=e&&r.lineNumber<=pn}var f="\nFrom previous event:\n";function s(e){if(e instanceof Error&&e.stack&&e.stack.indexOf(f)===-1){e.stack=[o(e.stack,0)].concat(t||[]).join(f)}}var c=T(typeof process)&&process!=null&&{}.toString.call(process)==="[object process]",p=typeof setImmediate==="function",v=T(typeof MutationObserver)&&MutationObserver||T(typeof WebKitMutationObserver)&&WebKitMutationObserver,d=new S,_=d,h=false,m=0,y=c?$:v?K(O):W(O),b=[],g=W(N),w,k,x=T.call,j=T.apply;_.next=d;function S(){this.task=null;this.a=null;this.b=null;this.domain=null;this.trace=null;this.next=null}function T(e){return e==="object"||e==="function"}function N(){if(b.length){throw b.shift()}}function O(){while(d!==_){var e=d=d.next;if(m>=1024){_.next=_.next.next}else{++m}t=e.trace;if(e.domain){I(e.domain,e.task,e.a,e.b);e.domain=null}else{(1,e.task)(e.a,e.b)}e.task=null;e.a=null;e.b=null;e.trace=null}h=false;t=null}function E(){d.task=null;d.a=null;d.b=null;d.domain=null;d.trace=null;y()}function I(e,n,t,r){if(e._disposed){return}e.enter();n(t,r);e.exit()}function M(e,n,t){A(e,n,t,c?process.domain:null,L.longStackSupport?r():null)}function A(e,n,t,r,i){var a=_.next;if(a===d){a=new S;_.next=a;a.next=d}else{--m}_=a;a.task=e;a.a=n;a.b=t;a.domain=r;a.trace=i;if(!h){h=true;y()}}function $(){var e=process.domain;if(e){if(!k)k=(1,require)("domain");k.active=process.domain=null}if(h&&p){setImmediate(O)}else{process.nextTick(O)}if(e){k.active=process.domain=e}}function K(e){var n=1;var t=document.createTextNode("");var r=new v(e);r.observe(t,{characterData:true});return function(){n=-n;t.data=n}}function W(e){return function(){var n=setTimeout(r,0);var t=setInterval(r,50);function r(){clearTimeout(n);clearInterval(t);e()}}}if(c){w=function(e){E();throw e}}else{w=function(e){b.push(e);g()}}function q(e,n){try{e.call()}catch(t){n(t)}}function D(e){M(q,e,w)}var F=0;var P=1;var Y=2;var z=-1;var B=-2;var C=-3;var G=-4;function H(e){if(e._state===Y){A(J,e._value,w,e._domain,null)}}function J(e,n){if(L.onerror){try{(1,L.onerror)(e)}catch(t){n(t)}}else{n(e)}}function L(e){return e instanceof un?e:V(new un,e,false)}L.longStackSupport=false;function Q(e,n){if(e._state){return}e._state=P;e._value=n;if(e._pending){Z(e,e._op,e._pending);e._pending=null}}function R(e,n){if(e._state){return}if(t){s(n)}e._state=Y;e._value=n;if(c){e._domain=process.domain}if(e._pending){Z(e,e._op,e._pending);e._pending=null}}function U(e,n){if(n._state){return}n._state=e._state;n._value=e._value;n._domain=e._domain;if(n._pending){Z(n,n._op,n._pending);n._pending=null}}function V(e,n,t){if(e._state){return e}if(n instanceof un){if(n===e){R(e,new TypeError("You can't resolve a promise with itself"))}else if(n._state){U(n,e)}else{en(n,C,e)}}else if(n!==Object(n)){Q(e,n)}else if(t){X(e,n)}else{M(X,e,n)}return e}function X(e,n){var t,r;try{r=n.then}catch(i){R(e,i);return}if(typeof r==="function"){t=rn(e);try{x.call(r,n,t.resolve,t.reject)}catch(a){t.reject(a)}}else{Q(e,n)}}function Z(e,n,t){switch(n){case z:t(e);break;case B:A(nn,e,t,e._domain||t._domain,t._trace);break;case C:A(U,e,t,null,null);break;case G:for(var r=0,i=t.length;r<i;r+=2){Z(e,t[r],t[r+1])}break;default:t(e,n)}}function en(e,n,t){if(e._state){Z(e,n,t)}else if(!e._pending){e._pending=t;e._op=n}else if(e._op===G){e._pending.push(n,t)}else{e._pending=[e._op,e._pending,n,t];e._op=G}}function nn(e,n){var t=e._state===P?n._cb:n._eb;n._cb=null;n._eb=null;n._domain=null;n._trace=null;if(t===null){U(e,n)}else{tn(n,t,e._value)}}function tn(e,n,t){var r;try{r=n(t)}catch(i){R(e,i);return}V(e,r,true)}function rn(e){var n=false;return{promise:e,resolve:function(t){if(!n){n=true;V(e,t,false)}},reject:function(t){if(!n){n=true;R(e,t)}}}}L.defer=an;function an(){return rn(new un)}L.reject=on;function on(e){var n=new un;R(n,e);return n}function un(){this._state=0;this._value=void 0;this._domain=null;this._cb=null;this._eb=null;this._op=0;this._pending=null;this._trace=null}un.prototype.then=function(e,n){var t=new un;t._cb=typeof e==="function"?e:null;t._eb=typeof n==="function"?n:null;if(L.longStackSupport){t._trace=r()}if(c){t._domain=process.domain}en(this,B,t);return t};un.prototype.done=function(e,n){var t=this;if(e||n){t=t.then(e,n)}en(t,z,H)};un.prototype.fail=function(e){return this.then(null,e)};un.prototype.spread=function(e,n){return this.then(fn).then(function(n){return j.call(e,void 0,n)},n)};un.prototype.timeout=function(e,n){var i=new un;if(this._state!==F){U(this,i)}else{var a=L.longStackSupport?r():null;var o=setTimeout(function(){t=a;R(i,new Error(n||"Timed out after "+e+" ms"))},e);en(this,z,function(e){clearTimeout(o);U(e,i)})}return i};un.prototype.delay=function(e){var n=an();this.then(function(r){var i=t;setTimeout(function(){t=i;n.resolve(r)},e)},n.reject);return n.promise};un.prototype.all=function(){return this.then(fn)};un.prototype.allSettled=function(){return this.then(ln)};un.prototype.inspect=function(){switch(this._state){case F:return{state:"pending"};case P:return{state:"fulfilled",value:this._value};case Y:return{state:"rejected",reason:this._value};default:throw new TypeError("invalid state")}};un.prototype.nodeify=function(e){if(e){this.done(function(n){e(null,n)},e);return void 0}else{return this}};L.allSettled=ln;function ln(e){var n=new un;var t=e.length;if(typeof t!=="number"){R(n,new TypeError("input not array-like"));return n}var r=0;var i=new Array(t);function a(e,t){i[t]=e.inspect();if(--r===0){Q(n,i)}}for(var o=0;o<t;++o){if(o in e){var u=L(e[o]);if(u._state){i[o]=u.inspect()}else{++r;en(u,o,a)}}}if(r===0){Q(n,i)}return n}L.all=fn;function fn(e){var n=new un;var t=e.length;if(typeof t!=="number"){R(n,new TypeError("input not array-like"));return n}var r=0;var i=new Array(t);function a(e,t){if(e._state===Y){U(e,n);return}i[t]=e._value;if(--r===0){Q(n,i)}}for(var o=0;o<t;++o){if(o in e){var u=L(e[o]);if(u._state===P){i[o]=u._value}else if(u._state===Y){U(u,n);break}else{++r;en(u,o,a)}}}if(r===0){Q(n,i)}return n}L.spread=sn;function sn(e,n,t){return fn(e).then(function(e){return j.call(n,void 0,e)},t)}L.promised=cn;function cn(e){function n(n){return x.apply(e,n)}return function(){var e=arguments.length;var t=new Array(e+1);t[0]=this;for(var r=0;r<e;++r){t[r+1]=arguments[r]}return fn(t).then(n)}}L.onerror=null;L.nextTick=D;var pn=a();return L});